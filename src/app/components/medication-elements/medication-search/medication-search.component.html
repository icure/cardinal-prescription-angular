<div class="medicationSearch">
  <div
    [class.dropdownDisplayed]="dropdownDisplayed"
    class="medicationSearch__input">
    <p>{{ t('medication.search.label') }}:</p>
    <label for="medicationSearch">
      <input
        #inputRef
        id="medicationSearch"
        type="text"
        placeholder="{{ t('medication.search.label') }}"
        autocomplete="off"
        autocapitalize="off"
        (input)="onSearchChange($event)"
        [value]="searchQuery$ | async" />
      <app-search-icn color="#9CA8B2" />
    </label>
    <p
      class="error"
      *ngIf="currentSearchQuery && currentSearchQuery.length < 3">
      {{ t('medication.search.errorMessage') }}
    </p>
  </div>

  <div
    #medicationSearchDropdown
    *ngIf="pages?.length"
    class="medicationSearchDropdown"
    (keydown)="handleKeyDown($event)">
    <div
      *ngFor="let med of pages; let i = index"
      #resultRef
      class="medicationSearchDropdown__cardWrap"
      [class.focused]="focusedMedicationIndex === i">
      <app-medication-card
        class="medication-card"
        [medication]="med"
        [index]="i"
        [focused]="focusedMedicationIndex === i"
        [handleAddPrescription]="onAddPrescription" />
    </div>
    <div #scrollAnchor style="height: 1px"></div>
  </div>
</div>
